# 0 Azure结构

- 每个数据中心都有装满服务器的迷你机架

- ![image-20210116190334281](https://i.loli.net/2021/01/16/QAXJFnCSYacos17.png)
- ![image-20210116190433891](https://i.loli.net/2021/01/16/F2ra6h7gCSZeUxb.png)
- ![image-20210116190505589](https://i.loli.net/2021/01/16/MSmwN2rcn3DepfB.png)

- ![image-20210116190537758](https://i.loli.net/2021/01/16/WoHyK7uMNemFidB.png)
- ![image-20210116190610718](https://i.loli.net/2021/01/16/sU194M8Niy3QJGZ.png)
- ![image-20210116190637546](https://i.loli.net/2021/01/16/ye7LjxSFMWbaHAq.png)

- ![image-20210116190720914](https://i.loli.net/2021/01/16/9RFsicvHPTaq3ko.png)

# 1 Azure概述

![image-20210116191259797](https://i.loli.net/2021/01/16/1cGCEYXznP68ItD.png)

- compute services：VM，containers，serverless computing，microservices
- clooud storage：disks attached with VM

<img src="https://i.loli.net/2021/01/16/Nt1i9uwRscfUIgX.png" alt="img" style="zoom:200%;" />

![图示展示了不同级别的帐户作用域。](https://i.loli.net/2021/01/16/B6Uyo7t5zMChgQx.png)

一个帐户可以有一个订阅，也可以有多个具有不同计费模式的订阅，你可以对这些订阅应用不同的访问管理策略。 可以使用 Azure 订阅来定义 Azure 产品、服务和资源的边界。 可以使用两种类型的订阅边界：

- **计费边界**：此订阅类型确定如何对使用 Azure 的 Azure 帐户计费。 可以为不同类型的计费要求创建多个订阅。 Azure 为每个订阅生成单独的计费报告和发票，以便你组织和管理成本。
- **访问控制边界**：Azure 会在订阅级别应用访问管理策略，你可以创建单独的订阅来反映不同的组织结构。 例如在企业中，你可对不同的部门应用不同的 Azure 订阅策略。 通过这种计费模型，可以管理和控制对特定订阅中用户预配的资源的访问。

![显示 Azure 订阅使用身份验证和授权来访问 Azure 帐户的关系图。](https://i.loli.net/2021/01/16/a6AhveU23VlNg1Q.png)

# 2 迁移实例

你在 Tailwind Traders 的 IT 部门工作，该部门已决定将其应用程序和数据迁移到 Microsoft Azure。 你知道云计算将通过从现有的本地物理硬件迁移到云解决方案为公司节省时间和金钱。 借助这一种新的解决方案，你只需为所用的资源和计算时间付费。

![Tailwind Traders 公司徽标。](https://i.loli.net/2021/01/16/J9QguYKxdbjvo6V.png)

但是，某些云计算概念对于许多 IT 人员而言是新概念。 他们不断提出有关云计算可以为他们做哪些事情的具体问题。 **例如，管理 Tailwind Traders 网站的团队希望了解 Azure 如何提高网站的可用性和可伸缩性。 处理新硬件部署的团队希望了解云计算如何更快地完成其部署过程。**

**此外，开发人员团队想要了解在设计新应用程序时可供他们使用的不同选项。 例如，是否有一种方法可以在混合配置中运行其应用程序，即部分应用程序在本地运行，其余部分在云中运行？**

## 2.1 资本费用与运营费用

你应该考虑两种不同类型的费用：

- 资本支出 (CapEx) 是指花在实体基础设施上的前期支出，然后逐渐扣除这笔前期费用。 CapEx 的前期成本的价值会随着时间的推移而降低。
- 运营支出 (OpEx) 是现在花钱购买服务或产品，现在为其付费。 可以在消费的当年扣除此费用。 你可以在使用服务或产品时为其付费，无前期成本。

换句话说，当 Tailwind Traders 拥有其基础结构时，它会购买作为资产计入资产负债表的设备。 由于进行了资本投资，因此会计师将此项交易归类为 CapEx。 随着时间的推移，考虑到资产的有限使用寿命，资产将进行折旧或摊销。

另一方面，云服务因其消耗模型被归类为 OpEx。 没有资产可供 Tailwind Traders 摊销，其云服务提供商 (Azure) 管理与物理设备的购买和使用周期相关的成本。 因此，OpEx 会直接影响净利润、应纳税所得额以及资产负债表上的相关费用。

**总而言之，CapEx 需要大量的前期财务成本以及持续的维护和支持支出。 与此相反，OpEx 是基于使用的模型，因此 Tailwind Traders 只负责其使用的计算资源的成本。（Azure是基于使用的模型）**

## 2.2 云服务模型IaaS，PaaS，SaaS

<img src="https://i.loli.net/2021/01/16/kQeqJgAXo6dO2l1.png" alt="由云服务模型分隔的服务的关系图。" style="zoom:200%;" />

## 2.3 Serverless/FaaS (函数即服务)

与 PaaS 类似，无服务器计算使开发人员无需管理基础结构，从而能够更快地构建应用程序。 借助无服务器应用程序，云服务提供商自动预配、缩放和管理运行代码所需的基础结构。 无服务器体系结构具有高度可缩放性和事件驱动性，只在出现特定函数或触发器时使用资源。

请注意，服务器仍会运行代码。 “无服务器”这一名称源于一个事实，即与基础结构预配和管理相关的任务对开发人员不可见。 此方法使开发人员能够将精力集中在业务逻辑上，并为业务核心提供更多价值。 无服务器计算可帮助团队提高工作效率，更快地将产品推向市场，使组织能够更好地优化资源并专注于创新。

## 2.4 公有云、私有云和混合云

**云计算有三种部署模型：公有云、私有云和混合云。 当迁移到云时，对于每种部署模型，需要考虑的方面有所不同。**

